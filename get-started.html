<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Get Started — ROYAL CREATIVE</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <style>
    :root{ --accent:#10b981; --bg:#f8fafc; --card:#ffffff; --text:#1e293b }
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; margin:0; background:linear-gradient(to bottom,#f8fafc,#f1f5f9); color:var(--text); font-size:15px;}
    /* slightly smaller base font-size helps avoid overflow on narrow phones */
    .container{max-width:720px; margin:80px auto; padding:24px;}
    .card{background:var(--card); border-radius:12px; padding:20px; box-shadow:0 8px 30px rgba(6,7,20,0.06);} 
    h1{font-size:22px; margin-bottom:8px; color:var(--accent)}
    p.lead{color:#64748b; margin-bottom:18px}
    form{display:flex; flex-direction:column; gap:12px}
    label{font-size:12px; color:#334155}

    input[type="text"], input[type="tel"], textarea{
      width:100%;
      padding:12px 10px;
      border:1px solid #e2e8f0;
      border-radius:10px;
      font-size:15px;
      line-height:1.3;
    }

    textarea{min-height:120px; resize:vertical}

    .row{display:flex; gap:10px}
    .row .col{flex:1}

    .btn{
      display:inline-block;
      width:100%;
      text-align:center;
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;
      padding:12px 14px;
      border-radius:10px;
      border:0;
      font-weight:600;
      font-size:15px;
      cursor:pointer;
    }

    .muted{font-size:13px; color:#64748b}

    .status{padding:12px;border-radius:10px;font-size:14px;display:none;margin-top:8px}
    .status.success{background:#ecfdf5;color:#065f46}
    .status.error{background:#fff1f2;color:#7f1d1d}

    .nav-back{display:inline-flex; align-items:center; gap:8px; color:var(--text); text-decoration:none; margin-bottom:12px; padding:8px 0}

    input:focus, textarea:focus{outline:2px solid rgba(99,102,241,0.18); box-shadow:0 0 0 3px rgba(99,102,241,0.06)}

    /* Mobile adjustments */
    @media (max-width:480px){
      .container{margin:24px 12px; padding:8px}
      .card{padding:12px}
      h1{font-size:17px}
      .row{flex-direction:column}
      .btn{padding:12px}
      label{font-size:12px}
      .muted{font-size:12px}
      input[type="text"], input[type="tel"], textarea{font-size:14px; padding:10px}
      body{ -webkit-tap-highlight-color: rgba(0,0,0,0)}
    }
  </style>
</head>
<body>
  <div class="container">
    <a class="nav-back" href="index.html">← Back</a>
    <div class="card">
      <h1>Get Support — Start a Request</h1>
      <p class="lead">Fill your contact details and describe the laptop issue. We'll contact you to confirm and schedule the repair.</p>

      <div id="status" class="status" role="status" aria-live="polite"></div>

      <form id="support-form" novalidate>
        <label for="name">Full name *</label>
        <input id="name" name="name" type="text" autocomplete="name" required />

        <div class="row">
          <div class="col">
            <label for="phone">Phone number *</label>
            <input id="phone" name="phone" type="tel" value="+971 " placeholder="+971 5xxxxxxxx" pattern="^(\+971|00971)[0-9\s\-]{6,}$" required />
            <div class="muted">Starts with <strong>+971</strong> (UAE) — code is pre-filled</div>
          </div>
        </div>

        <label for="issue">Issue description *</label>
        <textarea id="issue" name="issue" required placeholder="Describe the laptop issue, symptoms, error messages, etc."></textarea>

        <button type="submit" class="btn">Submit Request</button>
      </form>

      <p class="muted" style="margin-top:12px">By submitting you consent to be contacted by ROYAL CREATIVE. We will only use your data to respond to this request.</p>
    </div>
  </div>

  <script>
    // Formspree endpoint
    const API_ENDPOINT = 'https://formspree.io/f/xqeezlrj'; // <-- your Formspree form URL

    const form = document.getElementById('support-form');
    const statusEl = document.getElementById('status');
    const phoneInput = document.getElementById('phone');

    // Prefill and protect default UAE prefix (+971). Keeps caret at end when focused.
    if (phoneInput && (!phoneInput.value || phoneInput.value.trim() === '')) phoneInput.value = '+971 ';

    if (phoneInput) {
      phoneInput.addEventListener('focus', () => {
        if (!phoneInput.value || phoneInput.value.trim().length === 0) phoneInput.value = '+971 ';
        setTimeout(() => {
          // move caret to end so user types after the prefix
          phoneInput.selectionStart = phoneInput.selectionEnd = phoneInput.value.length;
        }, 0);
      });

      phoneInput.addEventListener('blur', () => {
        // keep +971 if user cleared the field unintentionally
        if (!phoneInput.value || phoneInput.value.trim() === '+971') phoneInput.value = '+971 ';
      });
    }

    function showStatus(message, type) {
      statusEl.textContent = message;
      statusEl.className = 'status ' + (type === 'success'? 'success':'error');
      statusEl.style.display = 'block';
    }

    form.addEventListener('submit', async function(e){
      e.preventDefault();
      statusEl.style.display = 'none';

      const name = form.name.value.trim();
      let phone = form.phone.value.trim();
      const issue = form.issue.value.trim();

      // Auto-normalize: if user didn't include country code but provided digits, prepend +971
      if (phone && !(/^\+971|^00971/.test(phone))) {
        if (/^[0-9]/.test(phone)) phone = '+971 ' + phone;
      }

      if (!name || !phone || !issue) {
        showStatus('Please fill in all required fields.', 'error');
        return;
      }

      const payload = { name, phone, issue, source: 'website' };

      try {
        // Show loading
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.disabled = true; submitBtn.textContent = 'Sending...';

        const res = await fetch(API_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify(payload)
        });

        // try to parse JSON response to get helpful message
        const data = await res.json().catch(() => ({}));

        if (!res.ok) {
          const errMsg = data.error || data.message || ('Server error: ' + res.status);
          throw new Error(errMsg);
        }

        // success
        showStatus(data.message || 'Request submitted — we will contact you shortly.', 'success');
        form.reset();
        // optional: focus first field for quick new entry
        form.name.focus();
      } catch (err) {
        console.error(err);
        showStatus('Failed to submit. Please try again or contact us directly.', 'error');
      } finally {
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.disabled = false; submitBtn.textContent = 'Submit Request';
      }
    });
  </script>
</body>
</html>